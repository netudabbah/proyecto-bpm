import { Order, Receipt, ActivityLogEntry, DailyStats, KPIData, PaymentStatus, OrderProduct } from '../types';

const customers = [
  { id: 'c1', name: 'María González', email: 'maria@email.com', phone: '+54 11 4567-8901' },
  { id: 'c2', name: 'Carlos Rodríguez', email: 'carlos@email.com', phone: '+54 11 5678-9012' },
  { id: 'c3', name: 'Ana Martínez', email: 'ana@email.com', phone: '+54 11 6789-0123' },
  { id: 'c4', name: 'Juan López', email: 'juan@email.com', phone: '+54 11 7890-1234' },
  { id: 'c5', name: 'Laura Fernández', email: 'laura@email.com', phone: '+54 11 8901-2345' },
  { id: 'c6', name: 'Diego Sánchez', email: 'diego@email.com', phone: '+54 11 9012-3456' },
  { id: 'c7', name: 'Valentina Ruiz', email: 'valentina@email.com', phone: '+54 11 0123-4567' },
  { id: 'c8', name: 'Martín Díaz', email: 'martin@email.com', phone: '+54 11 1234-5678' },
  { id: 'c9', name: 'Camila Torres', email: 'camila@email.com', phone: '+54 11 2345-6789' },
  { id: 'c10', name: 'Lucas Herrera', email: 'lucas@email.com', phone: '+54 11 3456-7890' },
];

const sampleProducts: OrderProduct[][] = [
  [
    { id: 'p1', name: 'Sábana 2 plazas Blanca', sku: 'SAB-2P-BLA', quantity: 10, price: 2500 },
    { id: 'p2', name: 'Toallón Grande Gris', sku: 'TOA-GR-GRI', quantity: 5, price: 1800 },
    { id: 'p3', name: 'Acolchado King Size', sku: 'ACO-KS-001', quantity: 2, price: 8500 },
  ],
  [
    { id: 'p4', name: 'Almohada Premium', sku: 'ALM-PRE-001', quantity: 20, price: 950 },
    { id: 'p5', name: 'Funda de Almohada', sku: 'FUN-ALM-BLA', quantity: 20, price: 450 },
  ],
  [
    { id: 'p6', name: 'Cubrecama 1 plaza', sku: 'CUB-1P-AZU', quantity: 15, price: 3200 },
    { id: 'p7', name: 'Juego de Sábanas Queen', sku: 'JSA-QU-BEI', quantity: 8, price: 4500 },
  ],
  [
    { id: 'p8', name: 'Toalla de Mano', sku: 'TOA-MAN-BLA', quantity: 50, price: 380 },
  ],
  [
    { id: 'p9', name: 'Plumón Sintético', sku: 'PLU-SIN-2P', quantity: 5, price: 12000 },
    { id: 'p10', name: 'Protector de Colchón', sku: 'PRO-COL-2P', quantity: 5, price: 4500 },
  ],
];

const generateReceipt = (orderId: string, index: number, paymentStatus: PaymentStatus): Receipt => ({
  id: `r${orderId}-${index}`,
  orderId,
  imageUrl: `https://placehold.co/800x1200/f3f4f6/374151?text=Comprobante+${orderId}-${index}`,
  uploadedAt: new Date(Date.now() - Math.random() * 86400000 * 3).toISOString(),
  ocrText: `COMPROBANTE DE TRANSFERENCIA\nBanco: Galicia\nFecha: ${new Date().toLocaleDateString('es-AR')}\nMonto: $${(Math.random() * 50000 + 5000).toFixed(2)}\nDestino: CBU 0000003100012345678901\nReferencia: ${Math.random().toString(36).substring(7).toUpperCase()}`,
  detectedAmount: Math.random() > 0.1 ? Math.floor(Math.random() * 50000 + 5000) : null,
  paymentStatus,
  isDuplicate: Math.random() > 0.9,
  processedAt: paymentStatus !== 'pendiente' ? new Date(Date.now() - Math.random() * 3600000).toISOString() : null,
});

export const mockOrders: Order[] = [
  {
    id: 'ord1',
    orderNumber: 'TN-2024-001247',
    customer: customers[0],
    totalAmount: 45750.00,
    amountPaid: 45750.00,
    paymentStatus: 'total',
    orderStatus: 'armado',
    products: sampleProducts[0],
    receipts: [generateReceipt('ord1', 1, 'total')],
    createdAt: new Date(Date.now() - 3600000 * 2).toISOString(),
    updatedAt: new Date(Date.now() - 3600000).toISOString(),
    tiendanubeId: '1247',
    printedAt: new Date(Date.now() - 3600000 * 1.5).toISOString(),
    packedAt: new Date(Date.now() - 3600000).toISOString(),
    shippedAt: null,
  },
  {
    id: 'ord2',
    orderNumber: 'TN-2024-001248',
    customer: customers[1],
    totalAmount: 23500.00,
    amountPaid: 0,
    paymentStatus: 'pendiente',
    orderStatus: 'pendiente_pago',
    products: sampleProducts[1],
    receipts: [generateReceipt('ord2', 1, 'pendiente'), generateReceipt('ord2', 2, 'a_confirmar')],
    createdAt: new Date(Date.now() - 3600000 * 4).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 3).toISOString(),
    tiendanubeId: '1248',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  {
    id: 'ord3',
    orderNumber: 'TN-2024-001249',
    customer: customers[2],
    totalAmount: 67800.00,
    amountPaid: 35000.00,
    paymentStatus: 'parcial',
    orderStatus: 'a_imprimir',
    products: sampleProducts[2],
    receipts: [generateReceipt('ord3', 1, 'total')],
    createdAt: new Date(Date.now() - 3600000 * 5).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 4).toISOString(),
    tiendanubeId: '1249',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  {
    id: 'ord4',
    orderNumber: 'TN-2024-001250',
    customer: customers[3],
    totalAmount: 15200.00,
    amountPaid: 15200.00,
    paymentStatus: 'total',
    orderStatus: 'retirado',
    products: sampleProducts[3],
    receipts: [generateReceipt('ord4', 1, 'total')],
    createdAt: new Date(Date.now() - 3600000 * 6).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 5).toISOString(),
    tiendanubeId: '1250',
    printedAt: new Date(Date.now() - 3600000 * 5.5).toISOString(),
    packedAt: new Date(Date.now() - 3600000 * 5.2).toISOString(),
    shippedAt: new Date(Date.now() - 3600000 * 5).toISOString(),
  },
  {
    id: 'ord5',
    orderNumber: 'TN-2024-001251',
    customer: customers[4],
    totalAmount: 89900.00,
    amountPaid: 0,
    paymentStatus: 'rechazado',
    orderStatus: 'pendiente_pago',
    products: sampleProducts[4],
    receipts: [generateReceipt('ord5', 1, 'rechazado')],
    createdAt: new Date(Date.now() - 3600000 * 8).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 7).toISOString(),
    tiendanubeId: '1251',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  {
    id: 'ord6',
    orderNumber: 'TN-2024-001252',
    customer: customers[5],
    totalAmount: 34500.00,
    amountPaid: 34500.00,
    paymentStatus: 'a_confirmar',
    orderStatus: 'pendiente_pago',
    products: sampleProducts[0],
    receipts: [generateReceipt('ord6', 1, 'a_confirmar')],
    createdAt: new Date(Date.now() - 3600000 * 10).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 9).toISOString(),
    tiendanubeId: '1252',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  {
    id: 'ord7',
    orderNumber: 'TN-2024-001253',
    customer: customers[6],
    totalAmount: 52300.00,
    amountPaid: 52300.00,
    paymentStatus: 'total',
    orderStatus: 'en_calle',
    products: sampleProducts[1],
    receipts: [generateReceipt('ord7', 1, 'total'), generateReceipt('ord7', 2, 'total')],
    createdAt: new Date(Date.now() - 3600000 * 12).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 11).toISOString(),
    tiendanubeId: '1253',
    printedAt: new Date(Date.now() - 3600000 * 11.5).toISOString(),
    packedAt: new Date(Date.now() - 3600000 * 11.2).toISOString(),
    shippedAt: new Date(Date.now() - 3600000 * 11).toISOString(),
  },
  {
    id: 'ord8',
    orderNumber: 'TN-2024-001254',
    customer: customers[7],
    totalAmount: 18750.00,
    amountPaid: 0,
    paymentStatus: 'pendiente',
    orderStatus: 'pendiente_pago',
    products: sampleProducts[2],
    receipts: [],
    createdAt: new Date(Date.now() - 3600000 * 14).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 13).toISOString(),
    tiendanubeId: '1254',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  {
    id: 'ord9',
    orderNumber: 'TN-2024-001255',
    customer: customers[8],
    totalAmount: 41200.00,
    amountPaid: 41200.00,
    paymentStatus: 'total',
    orderStatus: 'enviado',
    products: sampleProducts[3],
    receipts: [generateReceipt('ord9', 1, 'total')],
    createdAt: new Date(Date.now() - 3600000 * 16).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 15).toISOString(),
    tiendanubeId: '1255',
    printedAt: new Date(Date.now() - 3600000 * 15.5).toISOString(),
    packedAt: new Date(Date.now() - 3600000 * 15.2).toISOString(),
    shippedAt: new Date(Date.now() - 3600000 * 15).toISOString(),
  },
  {
    id: 'ord10',
    orderNumber: 'TN-2024-001256',
    customer: customers[9],
    totalAmount: 76400.00,
    amountPaid: 0,
    paymentStatus: 'pendiente',
    orderStatus: 'pendiente_pago',
    products: sampleProducts[4],
    receipts: [generateReceipt('ord10', 1, 'pendiente')],
    createdAt: new Date(Date.now() - 3600000 * 18).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 17).toISOString(),
    tiendanubeId: '1256',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  {
    id: 'ord11',
    orderNumber: 'TN-2024-001257',
    customer: customers[0],
    totalAmount: 29800.00,
    amountPaid: 29800.00,
    paymentStatus: 'total',
    orderStatus: 'armado',
    products: sampleProducts[0],
    receipts: [generateReceipt('ord11', 1, 'total')],
    createdAt: new Date(Date.now() - 3600000 * 20).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 19).toISOString(),
    tiendanubeId: '1257',
    printedAt: new Date(Date.now() - 3600000 * 19.5).toISOString(),
    packedAt: new Date(Date.now() - 3600000 * 19).toISOString(),
    shippedAt: null,
  },
  {
    id: 'ord12',
    orderNumber: 'TN-2024-001258',
    customer: customers[1],
    totalAmount: 58900.00,
    amountPaid: 0,
    paymentStatus: 'rechazado',
    orderStatus: 'pendiente_pago',
    products: sampleProducts[1],
    receipts: [generateReceipt('ord12', 1, 'rechazado')],
    createdAt: new Date(Date.now() - 3600000 * 22).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 21).toISOString(),
    tiendanubeId: '1258',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  // Ejemplo: Pedido con comprobante "A confirmar" listo para imprimir
  {
    id: 'ord13',
    orderNumber: 'TN-2024-001259',
    customer: customers[2],
    totalAmount: 32500.00,
    amountPaid: 32500.00,
    paymentStatus: 'a_confirmar',
    orderStatus: 'a_imprimir',
    products: sampleProducts[3],
    receipts: [generateReceipt('ord13', 1, 'a_confirmar')],
    createdAt: new Date(Date.now() - 3600000 * 1).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 0.5).toISOString(),
    tiendanubeId: '1259',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  // Ejemplo: Pedido "A confirmar" listo para imprimir
  {
    id: 'ord14',
    orderNumber: 'TN-2024-001260',
    customer: customers[3],
    totalAmount: 47800.00,
    amountPaid: 47800.00,
    paymentStatus: 'a_confirmar',
    orderStatus: 'a_imprimir',
    products: sampleProducts[0],
    receipts: [generateReceipt('ord14', 1, 'a_confirmar')],
    createdAt: new Date(Date.now() - 3600000 * 0.8).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 0.3).toISOString(),
    tiendanubeId: '1260',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
  // Ejemplo: Pedido "A confirmar" ya impreso y en armado
  {
    id: 'ord15',
    orderNumber: 'TN-2024-001261',
    customer: customers[4],
    totalAmount: 28350.00,
    amountPaid: 28350.00,
    paymentStatus: 'a_confirmar',
    orderStatus: 'armado',
    products: sampleProducts[1],
    receipts: [generateReceipt('ord15', 1, 'a_confirmar')],
    createdAt: new Date(Date.now() - 3600000 * 3).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 2).toISOString(),
    tiendanubeId: '1261',
    printedAt: new Date(Date.now() - 3600000 * 2.5).toISOString(),
    packedAt: new Date(Date.now() - 3600000 * 2).toISOString(),
    shippedAt: null,
  },
  // Ejemplo: Pedido con pago parcial listo para imprimir
  {
    id: 'ord16',
    orderNumber: 'TN-2024-001262',
    customer: customers[5],
    totalAmount: 65000.00,
    amountPaid: 30000.00,
    paymentStatus: 'parcial',
    orderStatus: 'a_imprimir',
    products: sampleProducts[2],
    receipts: [generateReceipt('ord16', 1, 'total'), generateReceipt('ord16', 2, 'pendiente')],
    createdAt: new Date(Date.now() - 3600000 * 0.5).toISOString(),
    updatedAt: new Date(Date.now() - 3600000 * 0.2).toISOString(),
    tiendanubeId: '1262',
    printedAt: null,
    packedAt: null,
    shippedAt: null,
  },
];

export const mockActivityLog: ActivityLogEntry[] = [
  {
    id: 'act1',
    orderId: 'ord1',
    orderNumber: 'TN-2024-001247',
    action: 'validated',
    description: 'Pago total confirmado por $45.750,00',
    performedBy: 'Ana García',
    timestamp: new Date(Date.now() - 3600000).toISOString(),
  },
  {
    id: 'act2',
    orderId: 'ord1',
    orderNumber: 'TN-2024-001247',
    action: 'whatsapp_sent',
    description: 'Confirmación enviada por WhatsApp',
    performedBy: 'Sistema',
    timestamp: new Date(Date.now() - 3600000 + 60000).toISOString(),
  },
  {
    id: 'act3',
    orderId: 'ord1',
    orderNumber: 'TN-2024-001247',
    action: 'printed',
    description: 'Hoja de pedido impresa',
    performedBy: 'Ana García',
    timestamp: new Date(Date.now() - 3600000 * 1.5).toISOString(),
  },
  {
    id: 'act4',
    orderId: 'ord1',
    orderNumber: 'TN-2024-001247',
    action: 'packed',
    description: 'Pedido armado y empaquetado',
    performedBy: 'Carlos López',
    timestamp: new Date(Date.now() - 3600000).toISOString(),
  },
  {
    id: 'act5',
    orderId: 'ord5',
    orderNumber: 'TN-2024-001251',
    action: 'rejected',
    description: 'Comprobante rechazado - monto inválido',
    performedBy: 'Carlos López',
    timestamp: new Date(Date.now() - 7200000).toISOString(),
  },
  {
    id: 'act6',
    orderId: 'ord3',
    orderNumber: 'TN-2024-001249',
    action: 'validated',
    description: 'Pago parcial confirmado por $35.000,00',
    performedBy: 'Ana García',
    timestamp: new Date(Date.now() - 14400000).toISOString(),
  },
  {
    id: 'act7',
    orderId: 'ord2',
    orderNumber: 'TN-2024-001248',
    action: 'created',
    description: 'Nuevo pedido recibido',
    performedBy: 'Sistema',
    timestamp: new Date(Date.now() - 14400000).toISOString(),
  },
  {
    id: 'act8',
    orderId: 'ord7',
    orderNumber: 'TN-2024-001253',
    action: 'duplicate_flagged',
    description: 'Comprobante marcado como posible duplicado',
    performedBy: 'Sistema',
    timestamp: new Date(Date.now() - 43200000).toISOString(),
  },
  {
    id: 'act9',
    orderId: 'ord4',
    orderNumber: 'TN-2024-001250',
    action: 'edited',
    description: 'Monto corregido de $15.000 a $15.200',
    performedBy: 'Carlos López',
    timestamp: new Date(Date.now() - 18000000).toISOString(),
  },
  {
    id: 'act10',
    orderId: 'ord7',
    orderNumber: 'TN-2024-001253',
    action: 'shipped',
    description: 'Pedido entregado al flete',
    performedBy: 'Ana García',
    timestamp: new Date(Date.now() - 3600000 * 11).toISOString(),
  },
];

export const mockDailyStats: DailyStats[] = [
  { date: '2024-01-08', paid: 12, pending: 5, rejected: 2, total: 19 },
  { date: '2024-01-09', paid: 15, pending: 3, rejected: 1, total: 19 },
  { date: '2024-01-10', paid: 18, pending: 7, rejected: 3, total: 28 },
  { date: '2024-01-11', paid: 14, pending: 4, rejected: 2, total: 20 },
  { date: '2024-01-12', paid: 20, pending: 6, rejected: 1, total: 27 },
  { date: '2024-01-13', paid: 16, pending: 8, rejected: 4, total: 28 },
  { date: '2024-01-14', paid: 22, pending: 5, rejected: 2, total: 29 },
];

export const mockKPIData: KPIData = {
  totalOrdersToday: 29,
  paidToday: 22,
  pendingToday: 5,
  rejectedToday: 2,
  moneyCollected: 1247500.00,
  avgValidationTime: 4.2,
};

export const getAllReceipts = (): Receipt[] => {
  return mockOrders.flatMap(order => order.receipts);
};

export const getOrderById = (id: string): Order | undefined => {
  return mockOrders.find(order => order.id === id);
};
